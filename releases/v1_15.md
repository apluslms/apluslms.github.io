# A+ v1.15 Release Notes

June 2022 ([GitHub milestone](https://github.com/apluslms/a-plus/milestone/11?closed=1))

## A+ v1.15.0

* [A+ v1.15.0rc1](https://github.com/apluslms/a-plus/releases/tag/v1.15.0rc1b)
* [MOOC-Grader v1.15.0rc1](https://github.com/apluslms/mooc-grader/releases/tag/v1.15.0rc1)
* [Git Manager v1.15.0rc2](https://github.com/apluslms/gitmanager/releases/tag/v1.15.0rc2)
* [a-plus-rst-tools v1.5.0 to be added](https://github.com/apluslms/a-plus-rst-tools/releases/tag/v1.5.0)


### Changes / A+ front

* Teachers may easily create new A+ course instances themselves as self-service. ([issue #963](https://github.com/apluslms/a-plus/issues/963))
  - There is no longer a need to request course instances from A+ administrators
    unless you need a new course space with a new course code and name.
  - The new teacher's user interface in A+ (under the Edit course section) creates
    the course instance in the Git Manager backend as well.
  - Teachers may modify typical Git Manager settings directly in A+.
    Therefore, teachers usually need not access the Git Manager web site separately.
  - [demo video](https://aalto.cloud.panopto.eu/Panopto/Pages/Viewer.aspx?id=c65fa197-d82a-4732-9503-ae710064f733)
* Experimental alternative API for getting course results ([issue #918](https://github.com/apluslms/a-plus/issues/918))
  - Recent versions of A+ have suffered from very poor performance in the "All results" view so that in some cases, it has
    been unusable. We implemented an experimental alternative of the API endpoint used by the view, to test its efficiency in production environment. This will be replaced by a finalized implementation later, so this
    API is temporary, and not intended to be used by external applications.
  - **The All results view now by default ignores the assignment setting "grading mode - last submission" (the last submission defines the grade).**
    The setting has not been used often. There is a checkbox for enabling the grading mode setting, but it makes the page much slower.
  - If you use the setting "grading mode - last submission", pay attention so that you export the correct grades from the system.
* New feature: approve late or unofficial submissions as normal, graded submissions without penalties. ([issue #892](https://github.com/apluslms/a-plus/issues/892))
  - In the inspect submission view, teachers may approve late or unofficial submissions with a new Approve button.
  - First, inspect a submission that is late or unofficial. The Approve button is not visible otherwise.
  - The teacher may approve a single submission, the student's all submissions in one assignment or the whole module.
  - In this version, adding new deviations (personal deadline extensions) does not automatically approve any submissions.
    That part of the feature is still unfinished.
* New API endpoint for regrading submissions. ([issue #1008](https://github.com/apluslms/a-plus/issues/1008))
  - Course staff can (programmatically) re-submit an existing submission for grading through the `/api/v2/submissions/ID/re-submit` endpoint.
* Show hidden modules and exercises to teachers on the "Your points" page ([issue #1012](https://github.com/apluslms/a-plus/issues/1012)).
  - In particular, teachers can see enrollment questionnaires on the "Your points" page.
* Clarify enrollment counts in the participants view.
  - The different enrollment statuses (active/banned/removed/pending) are shown more clearly than before.
* Add download button for model answers and assignment templates as well as submitted files. ([issue #894](https://github.com/apluslms/a-plus/issues/894))
* Add button to the user profile view to regenerate the personal API access token. ([issue #1022](https://github.com/apluslms/a-plus/issues/1022))

### Bug fixes

* Fix enrollment questionnaire functionality when SISU enrollment is in use. ([issue #1042](https://github.com/apluslms/a-plus/issues/1042))
* Map static web addresses (such as images) in assignment descriptions to the correct server. ([issue #974](https://github.com/apluslms/a-plus/issues/974))
  - A+ used to map relative URLs in assignment descriptions to the Grader server.
    However, after the Git Manager was introduced, static files have been hosted in the Git Manager server.
    It is advisable to use the `static_host` setting in conf.py to generate proper full URLs for static files.

In addition, there are small coding style, documentation, etc. improvements.

### For system administrators

* Added `BASE_URL` to the Django settings of the MOOC-Grader.
  This must be manually set to the web address visible to end users, for example, `https://grader.aalto.fi`.
* Removed possibility to sign in as another user in A+. ([issue #1032](https://github.com/apluslms/a-plus/issues/1032))

#### Git manager

* Git Manager uses the `DEFAULT_GRADER_URL` setting if exercise configure files settings are missing a URL.
  This implies that the course settings in the course git repos do not have to include any grader URLs if they want to use the default servers.
* Added setting `LOCAL_COURSE_SOURCE_PATH` so that local testing does not require setting up any git repositories for courses.
  The run-gitmanager Docker container image uses the setting.
  Course directories may be mounted to `/srv/courses/source/COURSEKEY` in the container and the git origin setting is left empty.
* Git Manager performance improvements:
  - Added caching for different stages of the course builds. The Django settings must define `CACHES`.
    Memcached is recommended. `requirements_prod.txt` includes the Memcached client `pymemcache`.
  - Avoid copying unnecessary files in the course builds.
  - Note that new versions of git include a new security feature. Git checks if the current users owns the git repository directory.
    Pay attention to the `$HOME` variable so that the git operations find the correct `.gitconfig` file
    when you try to set global git settings and allow all directories for git (`safe.directories = *`).
